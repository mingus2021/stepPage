System.register("chunks:///_virtual/ether.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ethers.umd.min.js","./ethers.umd.min.mjs_cjs=&original=.js"],(function(e){"use strict";var t,n,a,r,i,o,u,s;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator},function(e){a=e.cclegacy,r=e._decorator,i=e.Label,o=e.Button,u=e.Component},function(e){s=e.default},null],execute:function(){var p,c;a._RF.push({},"c22d4NANZ5E76FOzxh8NgBR","ether",void 0);var l=r.ccclass,y=(r.property,"0x4887879941394Cf64329e59376eD0fB946cdd571"),d=[{inputs:[{internalType:"contract IERC20",name:"_tokenAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC20",name:"_tokenAddr",type:"address"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"}],name:"PayToken",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC20",name:"_tokenAddr",type:"address"},{indexed:!1,internalType:"address",name:"_userAddr",type:"address"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"}],name:"WithdrawToken",type:"event"},{inputs:[],name:"Award",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"AwardTime",outputs:[{internalType:"uint256",name:"time",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"CYCLE_",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_userAddr",type:"address"},{internalType:"uint256",name:"_chainType",type:"uint256"}],name:"GetStepRecode",outputs:[{internalType:"uint256",name:"_Score",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_chainType",type:"uint256"}],name:"GetTopRecode",outputs:[{internalType:"address",name:"_topUser",type:"address"},{internalType:"uint256",name:"_Score",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"IStepScore_",outputs:[{internalType:"contract IStepScore",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_userAddr",type:"address"},{internalType:"uint256",name:"_Score",type:"uint256"},{internalType:"uint256",name:"_chainType",type:"uint256"}],name:"InsertRecode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_raceMode",type:"uint256"},{internalType:"uint256",name:"_multiplier",type:"uint256"},{internalType:"uint256",name:"_cycleTime",type:"uint256"}],name:"SetMode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"SetOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IStepScore",name:"_stepScore",type:"address"}],name:"SetStepScoreContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"_tokenAddress",type:"address"}],name:"SetToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getMultiplier",outputs:[{internalType:"uint256",name:"multiplier",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastMint_",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"multiplier_",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"raceMode_",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenAddress_",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20",name:"_tokenAddress",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdrawErc20Token",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdrawEth",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"}],m=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];e("default",l("ether")(((c=function(e){function a(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).labelAccount=null,t.labelBlockNum=null,t.labelStepScore=null,t.labelTopAccount=null,t.labelTopScore=null,t.labelBalance=null,t.labelAwardTime=null,t.buttonAward=null,t.reflushAcc=!1,t.reflushBlockNum=0,t.reflushStepScore=0,t.reflushTopAccount="",t.reflushTopScore=0,t.reflushBalance=0,t.reflushAwardTime=0,t}t(a,e);var r=a.prototype;return r.start=function(){this.labelAccount=this.node.getChildByName("Account").getComponent(i),this.labelBlockNum=this.node.getChildByName("BlockNum").getComponent(i),this.labelStepScore=this.node.getChildByName("StepScore").getComponent(i),this.labelTopAccount=this.node.getChildByName("TopAccount").getComponent(i),this.labelTopScore=this.node.getChildByName("TopScore").getComponent(i),this.labelBalance=this.node.getChildByName("Balance").getComponent(i),this.labelAwardTime=this.node.getChildByName("AwardTime").getComponent(i),this.buttonAward=this.node.getChildByName("AwardButton").getComponent(o)},r.update=function(){if(!this.reflushAcc){var e=localStorage.getItem("account");""!=e&&(this.labelAccount.string="账户地址 "+e,this.reflushAcc=!0)}var t=localStorage.getItem("blockNumber");t!=this.reflushBlockNum&&(this.labelBlockNum.string="区块高度 "+t,this.reflushBlockNum=t);var n=localStorage.getItem("stepScore");n!=this.reflushStepScore&&(this.labelStepScore.string="个人得分 "+n,this.reflushStepScore=n);var a=localStorage.getItem("topAccount");a!=this.reflushTopAccount&&(this.labelTopAccount.string="榜首地址 "+a,this.reflushTopAccount=a);var r=localStorage.getItem("topScore");r!=this.reflushTopScore&&(this.labelTopScore.string="榜首得分 "+r,this.reflushTopScore=r);var i=localStorage.getItem("balance");i!=this.reflushBalance&&(this.labelBalance.string="当前奖池 "+i,this.reflushBalance=i);var o=localStorage.getItem("awardTime");o!=this.reflushAwardTime&&(this.labelAwardTime.string="倒计时 "+o,this.reflushAwardTime=o),0==Number(o)?(this.labelAwardTime.node.active=!1,this.buttonAward.node.active=!0):(this.labelAwardTime.node.active=!0,this.buttonAward.node.active=!1)},a.init=function(){var e=n(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=13;break}return a.provider=new s.providers.Web3Provider(window.ethereum),e.next=4,a.provider.send("eth_requestAccounts",[]);case 4:return t=e.sent,console.log("账户地址：",t[0]),localStorage.setItem("account",t[0]),this.getBlockNum(),a.contact_R=new s.Contract(y,d,a.provider),n=a.provider.getSigner(),a.contact_W=new s.Contract(y,d,n),a.contact_token=new s.Contract("0x897FDD6e874de9558eBBF750a77bff699D6eE4ec",m,n),e.abrupt("return",t[0]);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.getBlockNum=function(){var e=n(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.provider.getBlockNumber();case 2:return t=e.sent,console.log("区块高度：",t),localStorage.setItem("blockNumber",t),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.getBalance=function(){var e=n(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.contact_token.balanceOf(y);case 2:return t=e.sent,n=s.utils.formatUnits(t),console.log("余额：",t),localStorage.setItem("balance",n),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.getTopRecode=function(){var e=n(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.contact_R.GetTopRecode(0);case 2:return t=e.sent,console.log("版本：",t),localStorage.setItem("topAccount",t[0]),localStorage.setItem("topScore",t[1]),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.getStepRecode=function(){var e=n(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("account"),e.next=3,a.contact_R.GetStepRecode(t,0);case 3:return n=e.sent,console.log("分数：",n),localStorage.setItem("stepScore",n),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.getAwardTime=function(){var e=n(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.contact_R.AwardTime();case 2:return t=e.sent,console.log("发奖时间：",t),localStorage.setItem("awardTime",t),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.getMultiplier=function(){var e=n(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.contact_R.getMultiplier();case 2:return t=e.sent,console.log("倍率：",t),localStorage.setItem("multiplier",t),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.updateRecode=function(){var e=n(regeneratorRuntime.mark((function e(t){var n,r,i,o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("account"),r=localStorage.getItem("multiplier"),e.next=4,a.provider.getGasPrice();case 4:return i=e.sent,console.log("gasPrice:",i),e.next=8,a.contact_token.allowance(n,y);case 8:if(o=e.sent,console.log("allowance:",o),!(o<t*Number(r))){e.next=17;break}return e.next=13,a.contact_token.approve(y,t*Number(r),{gasPrice:i,gasLimit:"450000"});case 13:return u=e.sent,e.next=16,u.wait();case 16:console.log("approveResult",u);case 17:return e.next=19,a.contact_W.InsertRecode(n,t,0);case 19:return s=e.sent,e.next=22,s.wait();case 22:return console.log("更新：",s),this.getStepRecode(),e.abrupt("return",s);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.Reward=function(){var e=n(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.contact_W.Award();case 2:return t=e.sent,e.next=5,t.wait();case 5:return console.log("发奖：",t),this.getBalance(),this.getBlockNum(),this.getStepRecode(),this.getTopRecode(),this.getAwardTime(),this.getMultiplier(),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.getPeriodList=function(){var e=n(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.contact_R.GetPeriodList();case 2:return t=e.sent,console.log("列表：",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a}(u)).provider=void 0,c.contact_R=void 0,c.contact_W=void 0,c.contact_token=void 0,p=c))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ether.ts","./PlayerController.ts"],(function(t){"use strict";var e,i,r,n,a,o,s,u,l,h,c,d,p,f,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.createClass,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,u=t.Prefab,l=t.CCInteger,h=t.Node,c=t.LabelComponent,d=t.instantiate,p=t.Component},function(t){f=t.default},function(t){g=t.PlayerController}],execute:function(){var _,S,N,y,b,m,T,I,v,C,M,B,G,w,L,R,P;o._RF.push({},"326d6DtDjZPxJ4SwTMVuYAe","GameManager",void 0);var E,k,A=s.ccclass,O=s.property;!function(t){t[t.BT_NONE=0]="BT_NONE",t[t.BT_STONE=1]="BT_STONE"}(E||(E={})),function(t){t[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END"}(k||(k={}));t("GameManager",(_=A("GameManager"),S=O({type:u}),N=O({type:l}),y=O({type:h}),b=O({type:h}),m=O({type:h}),T=O({type:g}),I=O({type:c}),_((M=e((C=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"cubePrfb",M,a(e)),n(e,"roadLength",B,a(e)),e.CurIndex=0,e.RandNum=0,e.RecordNum=0,e._road=[],n(e,"startMenu",G,a(e)),n(e,"waittingMenu",w,a(e)),n(e,"endMenu",L,a(e)),n(e,"playerCtrl",R,a(e)),e._curState=k.GS_INIT,n(e,"stepsLabel",P,a(e)),e.reflushStepScore=0,e.reflush=!1,e}i(e,t);var o=e.prototype;return o.start=function(){this.curState=k.GS_INIT,this.playerCtrl.node.on("JumpEnd",this.onPlayerJumpEnd,this),f.init()},o.init=function(){this.startMenu.active=!0,this.endMenu.active=!1,this.waittingMenu.active=!1,this.generateRoad(),this.playerCtrl.setInputActive(!1),this.playerCtrl.node.setPosition(cc.v3()),this.playerCtrl.reset()},o.generateRoad=function(){this.roadLength=100,this.CurIndex=0,this.node.removeAllChildren(),this._road=[],this._road.push(E.BT_STONE);for(var t=1;t<this.roadLength;t++)this._road[t-1]===E.BT_NONE?this._road.push(E.BT_STONE):(this.RandNum=Math.floor(2*Math.random()),this._road.push(this.RandNum));for(var e=0;e<this._road.length;e++){var i=this.spawnBlockByType(this._road[e]);i&&(this.node.addChild(i),i.setPosition(e,-1.5,0))}this.RecordNum=this.roadLength},o.AddRoad=function(){for(var t=1;t<this.roadLength;t++)t<this.RecordNum||(this._road[t-1]===E.BT_NONE?this._road.push(E.BT_STONE):(this.RandNum=Math.floor(2*Math.random()),this._road.push(this.RandNum)));for(var e=0;e<this._road.length;e++)if(!(e<this.RecordNum)){var i=this.spawnBlockByType(this._road[e]);i&&(this.node.addChild(i),i.setPosition(e,-1.5,0))}this.RecordNum=this.roadLength},o.spawnBlockByType=function(t){var e=null;switch(t){case E.BT_STONE:e=d(this.cubePrfb)}return e},o.onStartButtonClicked=function(){this.curState=k.GS_PLAYING,f.getBalance(),f.getBlockNum(),f.getStepRecode(),f.getTopRecode(),f.getAwardTime(),f.getMultiplier();var t=localStorage.getItem("stepScore");this.reflushStepScore=t},o.onYesButtonClicked=function(){f.updateRecode(this.CurIndex),this.reflush=!0,this.endMenu.active=!1,this.waittingMenu.active=!0},o.onNoButtonClicked=function(){this.curState=k.GS_INIT},o.onAwardButtonClicked=function(){f.Reward()},o.checkResult=function(t){this.roadLength+=t-this.CurIndex,this.CurIndex=t,console.log(this.roadLength),t<=this.roadLength?this._road[t]==E.BT_NONE?(this.endMenu.active=!0,this.playerCtrl.setInputActive(!1)):this.AddRoad():this.curState=k.GS_INIT},o.onPlayerJumpEnd=function(t){this.stepsLabel.string=""+t,this.checkResult(t)},o.update=function(t){var e=localStorage.getItem("stepScore");this.reflush&&e!=this.reflushStepScore&&(console.log("update"),this.curState=k.GS_INIT,this.reflushStepScore=e,this.waittingMenu.active=!1,this.reflush=!1)},r(e,[{key:"curState",set:function(t){var e=this;switch(t){case k.GS_INIT:this.init(),this.stepsLabel.string="0";break;case k.GS_PLAYING:this.startMenu.active=!1,this.stepsLabel.string="0",setTimeout((function(){e.playerCtrl.setInputActive(!0)}),.1);break;case k.GS_END:}this._curState=t}}]),e}(p)).prototype,"cubePrfb",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(C.prototype,"roadLength",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),G=e(C.prototype,"startMenu",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(C.prototype,"waittingMenu",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(C.prototype,"endMenu",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(C.prototype,"playerCtrl",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(C.prototype,"stepsLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/http.ts",["cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy,n=t.loader}],execute:function(){e._RF.push({},"2900b4QNdRBdrAL2VUIeFo/","http",void 0);t("default",function(){function t(){}return t.get=function(t,e,r){var o="http://127.0.0.1:8080"+t,s=n.getXMLHttpRequest(),u=e,a="?";for(var c in u){var i=c+"="+u[c];a+=""==a?i:"&"+i}s.open("GET",o+a),s.timeout=5e3,s.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.onreadystatechange=function(){if(4===s.readyState&&200==s.status){var t=s.responseText;console.log("响应参数"+t),r(JSON.parse(t))}},s.send()},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./ethers.umd.min.mjs_cjs=&original=.js","./ether.ts","./PlayerController.ts","./GameManager.ts","./http.ts","./migrate-canvas.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var e,n,t,i,r,o,a;return{setters:[function(c){e=c.cclegacy,n=c.director,t=c.Director,i=c.Canvas,r=c.Camera,o=c.game,a=c.Node}],execute:function(){e._RF.push({},"f7837DJbVJLZLGevYwrsNpM","migrate-canvas",void 0);var c=1048575;function l(e,n){for(var t=0,i=e.children.length;t<i;t++)e.children[t].layer=n,l(e.children[t],n)}n.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var e,t,a,s=null==(e=n.getScene())?void 0:e.children,m=null==(t=n.getScene())?void 0:t.getComponentsInChildren(i);if(!(m.length<=1)){m=m.filter((function(e){return!!e.cameraComponent}));var v=null==(a=n.getScene())?void 0:a.getComponentsInChildren(r),p=0;v.forEach((function(e){return p|=e.visibility&c}));for(var u=[],f=0,C=s.length;f<C;f++){var h=s[f];if(o.isPersistRootNode(h)){var d=h.getComponentsInChildren(i);0!==d.length&&u.push.apply(u,d.filter((function(e){return!!e.cameraComponent})))}}u.forEach((function(e){if(m.find((function(n){return n!==e&&n.cameraComponent.visibility&e.cameraComponent.visibility&c}))){var n=~p,t=n&~(n-1);e.cameraComponent.visibility=t|4293918720&e.cameraComponent.visibility,l(e.node,t),p|=n}}))}}));var s=a.prototype.setParent;function m(e){var n=0,t=e.getComponent(i);return t&&t.cameraComponent?n=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(e.parent&&(n=m(e.parent)),n)}a.prototype.setParent=function(e,n){if(s.call(this,e,n),e){var t=m(this);t&&(this.layer=t,l(this,t))}},e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,n,s,r,u,c,p,a,m,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,u=t.AnimationComponent,c=t.SkeletalAnimationComponent,p=t.systemEvent,a=t.SystemEvent,m=t.Vec3,h=t.Component}],execute:function(){var _,l,d,y,v,f,P;s._RF.push({},"ddfb1tkyx9BEqyM7xmfE5Db","PlayerController",void 0);var g=r.ccclass,S=r.property;t("PlayerController",(_=g("PlayerController"),l=S({type:u}),d=S({type:c}),_((f=e((v=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,o(e,"BodyAnim",f,n(e)),o(e,"CocosAnim",P,n(e)),e._startJump=!1,e._jumpStep=0,e._curJumpTime=0,e._jumpTime=.3,e._curJumpSpeed=0,e._curPos=cc.v3(),e._deltaPos=cc.v3(0,0,0),e._targetPos=cc.v3(),e._isMoving=!1,e._curMoveIndex=0,e}i(e,t);var s=e.prototype;return s.start=function(){},s.reset=function(){this._curMoveIndex=0},s.setInputActive=function(t){t?p.on(a.EventType.TOUCH_END,this.onMouseUp,this):p.off(a.EventType.TOUCH_END,this.onMouseUp,this)},s.onMouseUp=function(t){t.getLocationX()<400?this.jumpByStep(1):t.getLocationX()>500&&this.jumpByStep(2)},s.jumpByStep=function(t){this._isMoving||(this._startJump=!0,this._jumpStep=t,this._curJumpTime=0,this._curJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._curPos),m.add(this._targetPos,this._curPos,cc.v3(this._jumpStep,0,0)),this._isMoving=!0,this.CocosAnim.getState("cocos_anim_jump").speed=3.5,this.CocosAnim.play("cocos_anim_jump"),1===t||2===t&&this.BodyAnim.play("twoStep"),this._curMoveIndex+=t)},s.onOnceJumpEnd=function(){this._isMoving=!1,this.CocosAnim.play("cocos_anim_idle"),this.node.emit("JumpEnd",this._curMoveIndex)},s.update=function(t){this._startJump&&(this._curJumpTime+=t,this._curJumpTime>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this.onOnceJumpEnd()):(this.node.getPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*t,m.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)))},e}(h)).prototype,"BodyAnim",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(v.prototype,"CocosAnim",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=v))||y));s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});